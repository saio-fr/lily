(function(e){var t={};var n={};var r=null;e.fn.wheelColorPicker=function(){if(arguments.length==0){return t.setOptions.call(this,{})}if(typeof arguments[0]==="object"){return t.setOptions.call(this,arguments[0])}else if(e.isFunction(t[arguments[0]])){var n=[].shift;var r=n.apply(arguments);return t[r].apply(this,arguments)}else if(arguments.length==2){return t.setOption.call(this,arguments[0],arguments[1])}else if(arguments.length==1){return t.getOption.call(this,arguments[0])}else{e.error("Method/option named "+arguments[0]+" does not exist on jQuery.wheelColorPicker")}};e.fn.wheelColorPicker.defaults={format:"hex",preview:false,live:true,userinput:true,validate:false,autoConvert:true,color:null,alpha:null,preserveWheel:false,cssClass:"",width:null,height:null,layout:"popup",animDuration:200,quality:1,sliders:null,showSliderLabel:true,showSliderValue:false};e.fn.wheelColorPicker.hasInit=false;e.fn.wheelColorPicker.colorToStr=function(e,t){var n="";switch(t){case"css":n="#";case"hex":var r=Math.round(e.r*255).toString(16);if(r.length==1){r="0"+r}var i=Math.round(e.g*255).toString(16);if(i.length==1){i="0"+i}var s=Math.round(e.b*255).toString(16);if(s.length==1){s="0"+s}n+=r+i+s;break;case"rgb":n="rgb("+Math.round(e.r*255)+","+Math.round(e.g*255)+","+Math.round(e.b*255)+")";break;case"rgb%":n="rgb("+e.r*100+"%,"+e.g*100+"%,"+e.b*100+"%)";break;case"rgba":n="rgba("+Math.round(e.r*255)+","+Math.round(e.g*255)+","+Math.round(e.b*255)+","+e.a+")";break;case"rgba%":n="rgba("+e.r*100+"%,"+e.g*100+"%,"+e.b*100+"%,"+e.a*100+"%)";break;case"hsv":n="hsv("+e.h*360+","+e.s+","+e.v+")";break;case"hsv%":n="hsv("+e.h*100+"%,"+e.s*100+"%,"+e.v*100+"%)";break;case"hsva":n="hsva("+e.h*360+","+e.s+","+e.v+","+e.a+")";break;case"hsva%":n="hsva("+e.h*100+"%,"+e.s*100+"%,"+e.v*100+"%,"+e.a*100+"%)";break;case"hsb":n="hsb("+e.h+","+e.s+","+e.v+")";break;case"hsb%":n="hsb("+e.h*100+"%,"+e.s*100+"%,"+e.v*100+"%)";break;case"hsba":n="hsba("+e.h+","+e.s+","+e.v+","+e.a+")";break;case"hsba%":n="hsba("+e.h*100+"%,"+e.s*100+"%,"+e.v*100+"%,"+e.a*100+"%)";break}return n};e.fn.wheelColorPicker.strToColor=function(e){var t={a:1};var n;var r;if(e.match(/^#[0-9a-f]{6}$/i)!=null){if(isNaN(t.r=parseInt(e.substr(1,2),16)/255)){return false}if(isNaN(t.g=parseInt(e.substr(3,2),16)/255)){return false}if(isNaN(t.b=parseInt(e.substr(5,2),16)/255)){return false}}else if(e.match(/^[0-9a-f]{6}$/i)!=null){if(isNaN(t.r=parseInt(e.substr(0,2),16)/255)){return false}if(isNaN(t.g=parseInt(e.substr(2,2),16)/255)){return false}if(isNaN(t.b=parseInt(e.substr(4,2),16)/255)){return false}}else if(e.match(/^rgba\s*\(\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*\)$/i)!=null||e.match(/^rgb\s*\(\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*\)$/i)!=null){if(e.match(/a/i)!=null){r=true}else{r=false}n=e.substring(e.indexOf("(")+1,e.indexOf(","));if(n.charAt(n.length-1)=="%"){if(isNaN(t.r=parseFloat(n)/100)){return false}}else{if(isNaN(t.r=parseInt(n)/255)){return false}}n=e.substring(e.indexOf(",")+1,e.indexOf(",",e.indexOf(",")+1));if(n.charAt(n.length-1)=="%"){if(isNaN(t.g=parseFloat(n)/100)){return false}}else{if(isNaN(t.g=parseInt(n)/255)){return false}}if(r){n=e.substring(e.indexOf(",",e.indexOf(",")+1)+1,e.lastIndexOf(","))}else{n=e.substring(e.lastIndexOf(",")+1,e.lastIndexOf(")"))}if(n.charAt(n.length-1)=="%"){if(isNaN(t.b=parseFloat(n)/100)){return false}}else{if(isNaN(t.b=parseInt(n)/255)){return false}}if(r){n=e.substring(e.lastIndexOf(",")+1,e.lastIndexOf(")"));if(n.charAt(n.length-1)=="%"){if(isNaN(t.a=parseFloat(n)/100)){return false}}else{if(isNaN(t.a=parseFloat(n))){return false}}}}else if(e.match(/^hsva\s*\(\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*\)$/i)!=null||e.match(/^hsv\s*\(\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*\)$/i)!=null||e.match(/^hsba\s*\(\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*\)$/i)!=null||e.match(/^hsb\s*\(\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*\)$/i)!=null){if(e.match(/a/i)!=null){r=true}else{r=false}n=e.substring(e.indexOf("(")+1,e.indexOf(","));if(n.charAt(n.length-1)=="%"){if(isNaN(t.h=parseFloat(n)/100)){return false}}else{if(isNaN(t.h=parseFloat(n)/360)){return false}}n=e.substring(e.indexOf(",")+1,e.indexOf(",",e.indexOf(",")+1));if(n.charAt(n.length-1)=="%"){if(isNaN(t.s=parseFloat(n)/100)){return false}}else{if(isNaN(t.s=parseFloat(n))){return false}}if(r){n=e.substring(e.indexOf(",",e.indexOf(",")+1)+1,e.lastIndexOf(","))}else{n=e.substring(e.lastIndexOf(",")+1,e.lastIndexOf(")"))}if(n.charAt(n.length-1)=="%"){if(isNaN(t.v=parseFloat(n)/100)){return false}}else{if(isNaN(t.v=parseFloat(n))){return false}}if(r){n=e.substring(e.lastIndexOf(",")+1,e.lastIndexOf(")"));if(n.charAt(n.length-1)=="%"){if(isNaN(t.a=parseFloat(n)/100)){return false}}else{if(isNaN(t.a=parseFloat(n))){return false}}}}else{return false}return t};e.fn.wheelColorPicker.hsvToRgb=function(e,t,n){var r=e<=1/6||e>=5/6?1:e<1/3?1-(e-1/6)*6:e>4/6?(e-4/6)*6:0;var i=e>=1/6&&e<=3/6?1:e<1/6?e*6:e<4/6?1-(e-3/6)*6:0;var s=e>=3/6&&e<=5/6?1:e>2/6&&e<3/6?(e-2/6)*6:e>5/6?1-(e-5/6)*6:0;var o=(r+(1-r)*(1-t))*n;var u=(i+(1-i)*(1-t))*n;var a=(s+(1-s)*(1-t))*n;return{r:o,g:u,b:a}};e.fn.wheelColorPicker.rgbToHsv=function(e,t,n){var r;var i;var s;var o=Math.max(e,t,n);var u=Math.min(e,t,n);var a=o-u;if(o!=0){i=a/o}else{i=0}if(a==0){r=0}else if(e==o){r=(6+(t-n)/a)%6}else if(t==o){r=2+(n-e)/a}else if(n==o){r=4+(e-t)/a}else{r=0}r=r/6;s=o;return{h:r,s:i,v:s}};t.staticInit=function(){if(e.fn.wheelColorPicker.hasInit)return;e("body").on("mouseup.wheelColorPicker",n.onBodyMouseUp);e("body").on("mousemove.wheelColorPicker",n.onBodyMouseMove)};t.init=function(){t.staticInit();return this.each(function(){var i=e(this);var s=i.data("jQWCP.settings");var o=null;if(s.hasInit)return;s.hasInit=true;var u={h:0,s:0,v:1,r:1,g:1,b:1,a:1};i.data("jQWCP.color",u);if(s.sliders==null)s.sliders="wvp"+(s.format.indexOf("a")>=0?"a":"");if(s.layout=="block"){o=n.initWidget.call(i);n.adjustWidget(o.get(0),s);o.addClass(s.cssClass);i.data("jQWCP.widget",o.get(0));o.data("jQWCP.inputElm",this);o.addClass("jQWCP-block");i.after(o);if(i.css("display")=="inline"){o.css("display","inline-block")}else{o.css("display",i.css("display"))}o.append(i);i.hide();if(i.attr("tabindex")!=undefined){o.attr("tabindex",i.attr("tabindex"))}else{o.attr("tabindex",0)}t.redrawSliders.call(i,null,true);t.updateSliders.call(i);o.on("focus.wheelColorPicker",n.onWidgetFocus);o.on("blur.wheelColorPicker",n.onWidgetBlur)}else{if(r==null){o=n.initWidget.call(i);i.data("jQWCP.widget",o.get(0));r=o;r.hide();e("body").append(o);o.on("mousedown.wheelColorPicker",n.onPopupDlgMouseDown);o.on("mouseup.wheelColorPicker",n.onPopupDlgMouseUp)}else{i.data("jQWCP.widget",r)}i.on("focus.wheelColorPicker",t.show);i.on("blur.wheelColorPicker",n.onInputBlur)}i.on("keyup.wheelColorPicker",n.onInputKeyup);i.on("change.wheelColorPicker",n.onInputChange);if(s.color==null){t.setValue.call(i,i.val())}else if(typeof s.color=="object"){t.setColor.call(i,s.color);s.color=undefined}else{t.setValue.call(i,s.color);s.color=undefined}if(s.userinput){i.removeAttr("readonly")}else{i.attr("readonly",true)}})};t.setOptions=function(n){this.each(function(){var t=e(this);var r=e.extend(true,{},e.fn.wheelColorPicker.defaults,n);t.data("jQWCP.settings",r)});return t.init.call(this)};t.destroy=function(){return this.each(function(){var t=e(this);var n=t.data("jQWCP.settings");var i=null;if(!n)return;if(n.layout=="block"){i=e(t.data("jQWCP.widget"));i.before(t);i.remove();t.show()}else{i=r}t.off("focus.wheelColorPicker");t.off("blur.wheelColorPicker");t.off("keyup.wheelColorPicker");t.off("change.wheelColorPicker");t.data("jQWCP.settings",null);t.data("jQWCP.widget",null)})};t.show=function(i){var s=e(this);var o=s.data("jQWCP.settings");var u=r;if(o.layout!="popup")return;if(this==s.data("jQWCP.inputElm"))return;u.stop(true,true);u.css({top:s.offset().top+s.outerHeight()+"px",left:s.offset().left+"px"});u.data("jQWCP.inputElm",this);u.attr("class","jQWCP-wWidget");u.addClass(o.cssClass);n.adjustWidget(u.get(0),o);t.redrawSliders.call(s,null,true);t.updateSliders.call(s);o.lastValue=s.val();u.fadeIn(o.animDuration)};t.hide=function(t){var n=e(this);var i=n.data("jQWCP.settings");r.fadeOut(i.animDuration)};t.redrawSliders=function(t,n){return this.each(function(){var t=e(this);var r=t.data("jQWCP.settings");var i=e(t.data("jQWCP.widget"));var s=t.data("jQWCP.color");if(this!=i.data("jQWCP.inputElm"))return;var o=1;var u=r.quality*50;var a=1;var f=0;var l=0;var c=0;var h=0;var p=0;var d=1;if(r.live){a=s.a;f=Math.round(s.r*255);l=Math.round(s.g*255);c=Math.round(s.b*255);h=s.h;p=s.s;d=s.v}var v=i.find(".jQWCP-wPreviewBox");var m=v.get(0).getContext("2d");m.fillStyle="rgba("+f+","+l+","+c+","+a+")";m.clearRect(0,0,1,1);m.fillRect(0,0,1,1);if(!r.live&&!n)return;var g=i.find(".jQWCP-wAlphaSlider");var y=g.get(0).getContext("2d");var b=y.createLinearGradient(0,0,0,u);b.addColorStop(0,"rgba("+f+","+l+","+c+",1)");b.addColorStop(1,"rgba("+f+","+l+","+c+",0)");y.fillStyle=b;y.clearRect(0,0,o,u);y.fillRect(0,0,o,u);var w=i.find(".jQWCP-wRedSlider");var E=w.get(0).getContext("2d");var S=E.createLinearGradient(0,0,0,u);S.addColorStop(0,"rgb(255,"+l+","+c+")");S.addColorStop(1,"rgb(0,"+l+","+c+")");E.fillStyle=S;E.fillRect(0,0,o,u);var x=i.find(".jQWCP-wGreenSlider");var T=x.get(0).getContext("2d");var N=T.createLinearGradient(0,0,0,u);N.addColorStop(0,"rgb("+f+",255,"+c+")");N.addColorStop(1,"rgb("+f+",0,"+c+")");T.fillStyle=N;T.fillRect(0,0,o,u);var C=i.find(".jQWCP-wBlueSlider");var k=C.get(0).getContext("2d");var L=k.createLinearGradient(0,0,0,u);L.addColorStop(0,"rgb("+f+","+l+",255)");L.addColorStop(1,"rgb("+f+","+l+",0)");k.fillStyle=L;k.fillRect(0,0,o,u);var A=i.find(".jQWCP-wHueSlider");var O=A.get(0).getContext("2d");var M=O.createLinearGradient(0,0,0,u);M.addColorStop(0,"#f00");M.addColorStop(.166666667,"#ff0");M.addColorStop(.333333333,"#0f0");M.addColorStop(.5,"#0ff");M.addColorStop(.666666667,"#00f");M.addColorStop(.833333333,"#f0f");M.addColorStop(1,"#f00");O.fillStyle=M;O.fillRect(0,0,o,u);var _=e.fn.wheelColorPicker.hsvToRgb(h,1,d);_.r=Math.round(_.r*255);_.g=Math.round(_.g*255);_.b=Math.round(_.b*255);var D=i.find(".jQWCP-wSatSlider");var P=D.get(0).getContext("2d");var H=P.createLinearGradient(0,0,0,u);H.addColorStop(0,"rgb("+_.r+","+_.g+","+_.b+")");H.addColorStop(1,"rgb("+Math.round(d*255)+","+Math.round(d*255)+","+Math.round(d*255)+")");P.fillStyle=H;P.fillRect(0,0,o,u);var B=e.fn.wheelColorPicker.hsvToRgb(h,p,1);B.r=Math.round(B.r*255);B.g=Math.round(B.g*255);B.b=Math.round(B.b*255);var j=i.find(".jQWCP-wValSlider");var F=j.get(0).getContext("2d");var I=F.createLinearGradient(0,0,0,u);I.addColorStop(0,"rgb("+B.r+","+B.g+","+B.b+")");I.addColorStop(1,"#000");F.fillStyle=I;F.fillRect(0,0,o,u)})};t.updateSliders=function(){return this.each(function(){var t=e(this);var n=t.data("jQWCP.settings");var r=e(t.data("jQWCP.widget"));var i=t.data("jQWCP.color");if(this!=r.data("jQWCP.inputElm"))return;var s=r.find(".jQWCP-wWheel");var o=r.find(".jQWCP-wWheelCursor");var u=r.find(".jQWCP-wWheelOverlay");var a=Math.cos(2*Math.PI*i.h)*i.s;var f=Math.sin(2*Math.PI*i.h)*i.s;var l=s.width()/2;var c=s.height()/2;o.css("left",l+a*s.width()/2+"px");o.css("top",c-f*s.height()/2+"px");if(n.preserveWheel){u.css("opacity",0)}else{u.css("opacity",1-(i.v<.2?.2:i.v))}var h=r.find(".jQWCP-wHueSlider");var p=r.find(".jQWCP-wHueCursor");p.css("top",i.h*h.height()+"px");var d=r.find(".jQWCP-wSatSlider");var v=r.find(".jQWCP-wSatCursor");v.css("top",(1-i.s)*d.height()+"px");var m=r.find(".jQWCP-wValSlider");var g=r.find(".jQWCP-wValCursor");g.css("top",(1-i.v)*m.height()+"px");var y=r.find(".jQWCP-wRedSlider");var b=r.find(".jQWCP-wRedCursor");b.css("top",(1-i.r)*y.height()+"px");var w=r.find(".jQWCP-wGreenSlider");var E=r.find(".jQWCP-wGreenCursor");E.css("top",(1-i.g)*w.height()+"px");var S=r.find(".jQWCP-wBlueSlider");var x=r.find(".jQWCP-wBlueCursor");x.css("top",(1-i.b)*S.height()+"px");var T=r.find(".jQWCP-wAlphaSlider");var N=r.find(".jQWCP-wAlphaCursor");N.css("top",(1-i.a)*T.height()+"px")})};t.updateSelection=function(){t.redrawSliders.call($this);return t.updateSliders.call($this)};t.setRgba=function(n,r,i,s){this.each(function(){var t=e(this);var o=t.data("jQWCP.color");o.r=n;o.g=r;o.b=i;if(s!=null){o.a=s}var u=e.fn.wheelColorPicker.rgbToHsv(n,r,i);o.h=u.h;o.s=u.s;o.v=u.v});t.updateSliders.call(this,"hsv");return t.redrawSliders.call(this,"svrgba")};t.setRgb=function(e,n,r){return t.setRgba.call(this,e,n,r,null)};t.setHsva=function(n,r,i,s){this.each(function(){var t=e(this);var o=t.data("jQWCP.color");o.h=n;o.s=r;o.v=i;if(s!=null){o.a=s}var u=e.fn.wheelColorPicker.hsvToRgb(n,r,i);o.r=u.r;o.g=u.g;o.b=u.b});t.updateSliders.call(this,"rgb");return t.redrawSliders.call(this,"svrgba")};t.setHsv=function(e,n,r){return t.setHsva.call(this,e,n,r,null)};t.setAlpha=function(n){this.each(function(){var t=e(this);var r=t.data("jQWCP.color");r.a=n});return t.redrawSliders.call(this,"")};t.alpha=function(t){var n=this.data("jQWCP.settings");if(t==null){return n.sliders.indexOf("a")==-1?false:true}else if(t==true){if(n.sliders.indexOf("a")==-1)return this.each(function(){var t=e(this);var n=t.data("jQWCP.settings");n.sliders+="a"})}else if(t==false){return this.each(function(){var t=e(this);var n=t.data("jQWCP.settings");n.sliders.replace("a","")})}};t.color=function(e){if(e==null){return t.getValue.call(this)}else{return t.setValue.call(this,e)}};t.getColor=function(){return this.data("jQWCP.color")};t.setColor=function(e){if(e.r!=null){return t.setRgba.call(this,e.r,e.g,e.b,e.a)}else if(e.h!=null){return t.setHsva.call(this,e.h,e.s,e.v,e.a)}else if(e.a!=null){return t.setAlpha.call(this,e.a)}return this};t.getValue=function(t){var n=this.data("jQWCP.settings");if(t==null){t=n.format}return e.fn.wheelColorPicker.colorToStr(this.data("jQWCP.color"),t)};t.setValue=function(n){var r=e.fn.wheelColorPicker.strToColor(n);if(!r)return this;return t.setColor.call(this,r)};n.initWidget=function(t){var r=this.data("jQWCP.settings");var i=r.quality*50;var s=e("<div class='jQWCP-wWidget'>"+"<div class='jQWCP-wWheelGroup'>"+"<div class='jQWCP-wWheel'>"+"<div class='jQWCP-wWheelOverlay'></div>"+"<span class='jQWCP-wWheelCursor'></span>"+"</div>"+"</div>"+"<div class='jQWCP-wHSVGroup'>"+"<div class='jQWCP-wHue jQWCP-slider-wrapper'>"+"<canvas class='jQWCP-wHueSlider jQWCP-slider' width='1' height='"+i+"' title='Hue'></canvas>"+"<span class='jQWCP-wHueCursor jQWCP-scursor'></span>"+"</div>"+"<div class='jQWCP-wSat jQWCP-slider-wrapper'>"+"<canvas class='jQWCP-wSatSlider jQWCP-slider' width='1' height='"+i+"' title='Saturation'></canvas>"+"<span class='jQWCP-wSatCursor jQWCP-scursor'></span>"+"</div>"+"<div class='jQWCP-wVal jQWCP-slider-wrapper'>"+"<canvas class='jQWCP-wValSlider jQWCP-slider' width='1' height='"+i+"' title='Value'></canvas>"+"<span class='jQWCP-wValCursor jQWCP-scursor'></span>"+"</div>"+"</div>"+"<div class='jQWCP-wRGBGroup'>"+"<div class='jQWCP-wRed jQWCP-slider-wrapper'>"+"<canvas class='jQWCP-wRedSlider jQWCP-slider' width='1' height='"+i+"' title='Red'></canvas>"+"<span class='jQWCP-wRedCursor jQWCP-scursor'></span>"+"</div>"+"<div class='jQWCP-wGreen jQWCP-slider-wrapper'>"+"<canvas class='jQWCP-wGreenSlider jQWCP-slider' width='1' height='"+i+"' title='Green'></canvas>"+"<span class='jQWCP-wGreenCursor jQWCP-scursor'></span>"+"</div>"+"<div class='jQWCP-wBlue jQWCP-slider-wrapper'>"+"<canvas class='jQWCP-wBlueSlider jQWCP-slider' width='1' height='"+i+"' title='Blue'></canvas>"+"<span class='jQWCP-wBlueCursor jQWCP-scursor'></span>"+"</div>"+"</div>"+"<div class='jQWCP-wAlpha jQWCP-slider-wrapper'>"+"<canvas class='jQWCP-wAlphaSlider jQWCP-slider' width='1' height='"+i+"' title='Alpha'></canvas>"+"<span class='jQWCP-wAlphaCursor jQWCP-scursor'></span>"+"</div>"+"<div class='jQWCP-wPreview'>"+"<canvas class='jQWCP-wPreviewBox' width='1' height='1' title='Selected Color'></canvas>"+"</div>"+"</div>");s.find(".jQWCP-wWheel, .jQWCP-slider-wrapper, .jQWCP-scursor, .jQWCP-slider").attr("unselectable","on").css("-moz-user-select","none").css("-webkit-user-select","none").css("user-select","none");s.on("mousedown.wheelColorPicker",".jQWCP-wWheel",n.onWheelMouseDown);s.on("mousedown.wheelColorPicker",".jQWCP-wWheelCursor",n.onWheelCursorMouseDown);s.on("mousedown.wheelColorPicker",".jQWCP-slider",n.onSliderMouseDown);s.on("mousedown.wheelColorPicker",".jQWCP-scursor",n.onSliderCursorMouseDown);return s};n.adjustWidget=function(t,n){var r=e(t);var i=n.sliders;if(i.indexOf("w")<0)r.find(".jQWCP-wHue").hide().addClass("hidden");else r.find(".jQWCP-wHue").show().removeClass("hidden");if(i.indexOf("s")<0)r.find(".jQWCP-wSat").hide().addClass("hidden");else r.find(".jQWCP-wSat").show().removeClass("hidden");if(i.indexOf("v")<0)r.find(".jQWCP-wVal").hide().addClass("hidden");else r.find(".jQWCP-wVal").show().removeClass("hidden");if(i.indexOf("r")<0)r.find(".jQWCP-wRed").hide().addClass("hidden");else r.find(".jQWCP-wRed").show().removeClass("hidden");if(i.indexOf("g")<0)r.find(".jQWCP-wGreen").hide().addClass("hidden");else r.find(".jQWCP-wGreen").show().removeClass("hidden");if(i.indexOf("b")<0)r.find(".jQWCP-wBlue").hide().addClass("hidden");else r.find(".jQWCP-wBlue").show().removeClass("hidden");if(i.indexOf("a")<0)r.find(".jQWCP-wAlpha").hide().addClass("hidden");else r.find(".jQWCP-wAlpha").show().removeClass("hidden");if(i.indexOf("p")<0)r.find(".jQWCP-wPreview").hide().addClass("hidden");else r.find(".jQWCP-wPreview").show().removeClass("hidden");var s=r.find(".jQWCP-wWheel, .jQWCP-slider-wrapper, .jQWCP-wPreview").not(".hidden");var o=0;s.each(function(t,n){o+=parseFloat(e(n).css("margin-left").replace("px"))+e(n).outerWidth()});r.css({width:o+"px"})};n.onPopupDlgMouseDown=function(t){var n=e(this);var r=e(n.data("jQWCP.inputElm"));r.off("blur.wheelColorPicker");r.off("focus.wheelColorPicker")};n.onPopupDlgMouseUp=function(t){var n=e(this);var r=e(n.data("jQWCP.inputElm"));r.trigger("focus.jQWCP_DONT_TRIGGER_EVENTS")};n.onWheelMouseDown=function(t){var n=e(this);var r=n.parents(".jQWCP-wWidget:eq(0)");var i=e(r.data("jQWCP.inputElm"));e("body").data("jQWCP.activeControl",n.get(0));i.trigger("sliderdown")};n.onWheelCursorMouseDown=function(t){var n=e(this);var r=n.parents(".jQWCP-wWidget:eq(0)");var i=e(r.data("jQWCP.inputElm"));e("body").data("jQWCP.activeControl",n.parent().get(0))};n.onSliderMouseDown=function(t){var n=e(this);var r=n.parents(".jQWCP-wWidget:eq(0)");var i=e(r.data("jQWCP.inputElm"));e("body").data("jQWCP.activeControl",n.parent().get(0));i.trigger("sliderdown")};n.onSliderCursorMouseDown=function(t){var n=e(this);var r=n.parents(".jQWCP-wWidget:eq(0)");var i=e(r.data("jQWCP.inputElm"));e("body").data("jQWCP.activeControl",n.parent().get(0))};n.onBodyMouseUp=function(r){var i=e(e("body").data("jQWCP.activeControl"));if(i.length!=0){var s=i.parents(".jQWCP-wWidget:eq(0)");var o=e(s.data("jQWCP.inputElm"));var u=o.data("jQWCP.settings");n.updateActiveControl(r);if(u.layout=="popup"){o.trigger("focus.jQWCP_DONT_TRIGGER_EVENTS");o.on("blur.wheelColorPicker",n.onInputBlur);o.on("focus.wheelColorPicker",t.show)}e("body").data("jQWCP.activeControl",null);o.trigger("sliderup")}};n.onBodyMouseMove=function(t){var r=e(e("body").data("jQWCP.activeControl"));if(r.length==0)return;var i=r.parents(".jQWCP-wWidget:eq(0)");var s=e(i.data("jQWCP.inputElm"));n.updateActiveControl(t);s.trigger("slidermove");return false};n.updateActiveControl=function(n){var r=e(e("body").data("jQWCP.activeControl"));if(r.length==0)return;var i=r.parents(".jQWCP-wWidget:eq(0)");var s=e(i.data("jQWCP.inputElm"));var o=s.data("jQWCP.settings");var u=s.data("jQWCP.color");if(r.hasClass("jQWCP-wWheel")){var a=r.find(".jQWCP-wWheelCursor");var f=r.find(".jQWCP-wWheelOverlay");var l=(n.pageX-r.offset().left-r.width()/2)/(r.width()/2);var c=-(n.pageY-r.offset().top-r.height()/2)/(r.height()/2);var h=Math.sqrt(Math.pow(l,2)+Math.pow(c,2));if(h>1){h=1}var p=Math.atan(c/l)/(2*Math.PI);if(p<0){p+=.5}if(c<0){p+=.5}t.setHsv.call(s,p,h,u.v)}else if(r.hasClass("jQWCP-slider-wrapper")){var a=r.find(".jQWCP-scursor");var c=(n.pageY-r.offset().top)/r.height();var d=c<0?0:c>1?1:c;a.css("top",d*r.height()+"px");if(r.hasClass("jQWCP-wRed")){t.setRgb.call(s,1-d,u.g,u.b)}if(r.hasClass("jQWCP-wGreen")){t.setRgb.call(s,u.r,1-d,u.b)}if(r.hasClass("jQWCP-wBlue")){t.setRgb.call(s,u.r,u.g,1-d)}if(r.hasClass("jQWCP-wHue")){t.setHsv.call(s,d,u.s,u.v)}if(r.hasClass("jQWCP-wSat")){t.setHsv.call(s,u.h,1-d,u.v)}if(r.hasClass("jQWCP-wVal")){t.setHsv.call(s,u.h,u.s,1-d)}if(r.hasClass("jQWCP-wAlpha")){t.setAlpha.call(s,1-d)}}s.val(t.getValue.call(s));if(o.preview){s.css("background",e.fn.wheelColorPicker.colorToStr(u,"rgba"));if(u.v>.5){s.css("color","black")}else{s.css("color","white")}}};n.onInputChange=function(n){var r=e(this);var i=e.fn.wheelColorPicker.strToColor(r.val());if(i){t.setColor.call(r,i)}};n.onInputKeyup=function(e){n.onInputChange.call(this,e)};n.onInputBlur=function(n){var r=e(this);var i=r.data("jQWCP.settings");var s=i.lastValue;var o=r.val();if(s!=o){r.trigger("change")}if(i.layout=="popup")t.hide.call(r)};n.onWidgetFocus=function(t){var n=e(e(this).data("jQWCP.inputElm"));var r=e(this);var i=n.data("jQWCP.settings");i.lastValue=n.val();n.triggerHandler("focus")};n.onWidgetBlur=function(t){var r=e(e(this).data("jQWCP.inputElm"));var i=e(this);n.onInputBlur.call(r);r.triggerHandler("blur")}})(jQuery)