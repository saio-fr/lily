lily.AppQuestionUnansweredView=Backbone.View.extend({id:"central-panel",template:_.template($("#central-panel-unanswered").html()),initialize:function(){this.render();$("#contenant-page").prepend(this.el);this.ChildViews=[];var listLabelsView=new lily.ListLabelsView;this.ChildViews.push(listLabelsView);app.listQuestionsUnansweredView=new lily.ListQuestionsUnansweredView;this.ChildViews.push(app.listQuestionsUnansweredView);app.listQuestionsUnansweredView.collection.fetch({success:function(){$("#list-questions-section").append(app.listQuestionsUnansweredView.render().el)}});this.listenTo(app.postRequest,"refresh",function(){app.listQuestionsUnansweredView.close();app.listQuestionsUnansweredView=new lily.listQuestionsUnansweredView;this.ChildViews[1]=app.listQuestionsUnanswereddView;app.listQuestionsUnansweredView.collection.fetch({data:JSON.stringify({categories:app.postRequest.categories,tags:app.postRequest.tags,max:app.postRequest.max,page:app.postRequest.page,sortBy:{name:app.postRequest.sortBy.name,order:app.postRequest.sortBy.order}}),type:"POST",success:function(){$("#list-questions-section").append(app.listQuestionsUnansweredView.render().el)}})})},render:function(){this.$el.prepend(this.template());return this},events:{"keyup #filtreRecherche":"searchQuestions","click .button-search":"searchQuestions","click .select_all_questions":"select_all_questions","click .unselect_all_questions":"unselect_all_questions","click #button-add-question":"displayFullQuestion","click .remove_label":"remove_label_from_select_questions","click .previous-page-button":"display_previous_page","click .next-page-button":"display_next_page"},searchQuestions:function(){},select_all_questions:function(){$("#list-questions").find("i").addClass("checked")},unselect_all_questions:function(){$("#list-questions").find("i").removeClass("checked")},displayFullQuestion:function(e){console.log("displayFullQuestion");if(typeof questionFullView=="undefined"){console.log("1");questionFullView=new lily.QuestionBusinessFullView({model:new lily.Question})}else{console.log("2");if(typeof questionFullView.model.id=="undefined"){console.log("3");questionFullView.remove();$("#question-content").addClass("hide");delete questionFullView}else{console.log("4");app.navigate("business",{trigger:true});questionFullView.remove();questionFullView=new lily.QuestionBusinessFullView({model:new lily.Question})}}},remove_label_from_select_questions:function(){},display_previous_page:function(){if(app.postRequest.page!==0){app.postRequest.page--;app.postRequest.trigger("refresh")}},display_next_page:function(){app.postRequest.page++;app.postRequest.trigger("refresh")},close:function(){this.unbind();this.remove();_.each(this.ChildViews,function(childview){if(childview.close){childview.close()}})}});