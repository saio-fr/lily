<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>{% block title %}Lily Back Office{% endblock %}</title>
  <meta name="description" content="lily, agent virtuel, back office" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

{% block stylesheets %}

{% stylesheets

  'css/vendor/bootstrap.css'
  'css/vendor/animate.css'
  'css/vendor/font-awesome.min.css'
  'css/vendor/font.css'
  'css/vendor/plugin.css'

filter='cssrewrite' %}

  <link rel="stylesheet" href="{{ asset_url }}" type="text/css" />

{% endstylesheets %}

  <link rel="stylesheet" href="{{ asset('css/vendor/app.css', version=getAppVersion()) }}" type="text/css"/>
  <link rel="stylesheet" href="{{ asset('css/backoffice/main.css', version=getAppVersion()) }}" type="text/css"/>
  <link rel="stylesheet" href="{{ asset('css/components/chat.css', version=getAppVersion()) }}" type="text/css"/>

{% endblock %}

  <!--[if lt IE 9]>
    <script src="{{ asset('js/ie/respond.min.js') }}" cache="false"></script>
    <script src="{{ asset('js/ie/html5.js') }}" cache="false"></script>
    <script src="{{ asset('js/ie/fix.js') }}" cache="false"></script>
  <![endif]-->

  <link rel="icon" href="{{ asset('images/home/favicon-saio.png') }}" />

</head>
<body>

  <section class="vbox">

    {% include "LilyBackOfficeBundle::header.html.twig" %}

    {% block body %}{% endblock %}

  </section>

  <!-- 
      Notifications
  -->
  <script type="text/template" id="notifsItemTpl">
    {% include 'LilyBackOfficeBundle:Utils/Notifs:notif_item.html.twig' %}
  </script>
  <script type="text/template" id="notifsListTpl">
    {% include 'LilyBackOfficeBundle:Utils/Notifs:notif_list.html.twig' %}
  </script>
  <!-- 
      Chat
  -->
  <script type="text/template" id="liveSkeletonTpl">
    {% include 'LilyBackOfficeBundle:Utils/Chat:skeleton.html.twig' %}
  </script>
  <script type="text/template" id="liveConversationTpl">
    {% include 'LilyBackOfficeBundle:Utils/Chat/Conversation:conversation.html.twig' %}
  </script>
  <script type="text/template" id="liveConversationShellTpl">
    {% include 'LilyBackOfficeBundle:Utils/Chat/Conversation/Shell:shell.html.twig' %}
  </script>
  <script type="text/template" id="liveConversationShellSuggestionsListTpl">
    {% include 'LilyBackOfficeBundle:Utils/Chat/Conversation/Shell/Suggestions:list.html.twig' %}
  </script>
  <script type="text/template" id="liveConversationShellSuggestionsItemTpl">
    {% include 'LilyBackOfficeBundle:Utils/Chat/Conversation/Shell/Suggestions:item.html.twig' %}
  </script>
  <script type="text/template" id="liveConversationShellAlertTpl">
    {% include 'LilyBackOfficeBundle:Utils/Chat/Conversation/Shell:alert.html.twig' %}
  </script>
  <script type="text/template" id="liveInformationsTpl">
    {% include 'LilyBackOfficeBundle:Utils/Chat:informations.html.twig' %}
  </script>
  <script type="text/template" id="liveRecordTpl">
    {% include 'LilyBackOfficeBundle:Utils/Chat:record.html.twig' %}
  </script>
  <script type="text/template" id="liveMessageOperatorTpl">
    {% include 'LilyBackOfficeBundle:Utils/Chat/Message:operator.html.twig' %}
  </script>
  <script type="text/template" id="liveMessageServerTpl">
    {% include 'LilyBackOfficeBundle:Utils/Chat/Message:server.html.twig' %}
  </script>
  <script type="text/template" id="liveMessageVisitorTpl">
    {% include 'LilyBackOfficeBundle:Utils/Chat/Message:visitor.html.twig' %}
  </script>
  <!-- 
      Modals
  -->
  <script type="text/template" id="modalConnectionLostTpl">
    {% include 'LilyChatBundle:Connection:lost.html.twig' %}
  </script>
  <script type="text/template" id="modalAlertTpl">
    {% include 'LilyBackOfficeBundle:Utils/Modal:alert.html.twig' %}
  </script>
  <script type="text/template" id="modalAppTpl">
    {% include 'LilyBackOfficeBundle:Utils/Modal:app.html.twig' %}
  </script>
  <script type="text/template" id="modalConfirmTpl">
    {% include 'LilyBackOfficeBundle:Utils/Modal:confirm.html.twig' %}
  </script>
  <script type="text/template" id="modalTransferOperatorTpl">
    {% include 'LilyBackOfficeBundle:Utils/Chat/Modals/Transfer:operator.html.twig' %}
  </script>
  
  <!-- 
    Load Bugsnag
  -->  
  <script
    src="//d2wy8f7a9ursnm.cloudfront.net/bugsnag-2.min.js"
    data-apikey="38313d808c52c00caa38aeed097efd1d">
  </script>

  <!-- 
    Set Bugsnag Config
  -->  
  <script>
    
    Bugsnag.user = {
      id: "{{ app.user.id }}",
      email: "{{ app.user.email }}"
    };
    
    Bugsnag.releaseStage = "{{ app.environment }}";
    Bugsnag.notifyReleaseStages = ["prod"];    
  </script>

  <script>
    /*
     * GOOGLE ANALYTICS
     */
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    {% if app.environment == 'dev' %}
    ga('create', 'UA-58970452-1', 'auto');
    {% else %}
    ga('create', 'UA-58965885-1', 'auto');
    {% endif %}
    window.config.chat = {{ app.user.client.config.chat }};
    window.config.isChatOperator = {{ is_granted('ROLE_CHAT_OPERATOR') }};
    window.config.userId = '{{ app.user.id }}';
  </script>

  <script>
    /*
     * Zendesk
     */
  /*<![CDATA[*/window.zEmbed||function(e,t){var n,o,d,i,s,a=[],r=document.createElement("iframe");window.zEmbed=function(){a.push(arguments)},window.zE=window.zE||window.zEmbed,r.src="javascript:false",r.title="",r.role="presentation",(r.frameElement||r).style.cssText="display: none",d=document.getElementsByTagName("script"),d=d[d.length-1],d.parentNode.insertBefore(r,d),i=r.contentWindow,s=i.document;try{o=s}catch(c){n=document.domain,r.src='javascript:var d=document.open();d.domain="'+n+'";void(0);',o=s}o.open()._l=function(){var o=this.createElement("script");n&&(this.domain=n),o.id="js-iframe-async",o.src=e,this.t=+new Date,this.zendeskHost=t,this.zEQueue=a,this.body.appendChild(o)},o.write('<body onload="document._l();">'),o.close()}("//assets.zendesk.com/embeddable_framework/main.js","saio85.zendesk.com");/*]]>*/
  </script>

</body>
</html>
