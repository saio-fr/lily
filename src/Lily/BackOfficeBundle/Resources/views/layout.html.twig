<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>{% block title %}Lily Back Office{% endblock %}</title>
  <meta name="description" content="lily, agent virtuel, back office" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

{% block stylesheets %}

{% stylesheets

  'css/vendor/bootstrap.css'
  'css/vendor/animate.css'
  'css/vendor/font-awesome.min.css'
  'css/vendor/font.css'
  'css/vendor/plugin.css'
  'css/vendor/app.css'
  'css/backoffice/main.css'
  'css/components/chat.css'

filter='cssrewrite' %}

  <link rel="stylesheet" href="{{ asset_url }}" type="text/css" />

{% endstylesheets %}
  
  <!-- BEGIN TRACKJS -->
{% if app.environment == 'prod' %}
  <script type="text/javascript">window._trackJs = { token: '55945a6850454d3d8ecba78c5b307b8a' };</script>
  <script type="text/javascript" src="//d2zah9y47r7bi2.cloudfront.net/releases/current/tracker.js" crossorigin="anonymous"></script>
{% endif %}
  <!-- END TRACKJS -->

{% endblock %}

  <!--[if lt IE 9]>
    <script src="{{ asset('js/ie/respond.min.js') }}" cache="false"></script>
    <script src="{{ asset('js/ie/html5.js') }}" cache="false"></script>
    <script src="{{ asset('js/ie/fix.js') }}" cache="false"></script>
  <![endif]-->

  <link rel="icon" href="{{ asset('images/home/favicon-saio.png') }}" />

</head>
<body>

  <section class="vbox">

    {% include "LilyBackOfficeBundle::header.html.twig" %}

    {% block body %}{% endblock %}

  </section>

  <!-- 
      Notifications
  -->
  <script type="text/template" id="notifsItemTpl">
    {% include 'LilyBackOfficeBundle:Utils/Notifs:notif_item.html.twig' %}
  </script>
  <script type="text/template" id="notifsListTpl">
    {% include 'LilyBackOfficeBundle:Utils/Notifs:notif_list.html.twig' %}
  </script>
  <!-- 
      Chat
  -->
  <script type="text/template" id="liveSkeletonTpl">
    {% include 'LilyBackOfficeBundle:Utils/Chat:skeleton.html.twig' %}
  </script>
  <script type="text/template" id="liveConversationTpl">
    {% include 'LilyBackOfficeBundle:Utils/Chat:conversation.html.twig' %}
  </script>
  <script type="text/template" id="liveInformationsTpl">
    {% include 'LilyBackOfficeBundle:Utils/Chat:informations.html.twig' %}
  </script>
  <script type="text/template" id="liveRecordTpl">
    {% include 'LilyBackOfficeBundle:Utils/Chat:record.html.twig' %}
  </script>
  <script type="text/template" id="liveMessageOperatorTpl">
    {% include 'LilyBackOfficeBundle:Utils/Chat/Message:operator.html.twig' %}
  </script>
  <script type="text/template" id="liveMessageServerTpl">
    {% include 'LilyBackOfficeBundle:Utils/Chat/Message:server.html.twig' %}
  </script>
  <script type="text/template" id="liveMessageVisitorTpl">
    {% include 'LilyBackOfficeBundle:Utils/Chat/Message:visitor.html.twig' %}
  </script>
  <!-- 
      Modals
  -->
  <script type="text/template" id="modalConnectionLostTpl">
    {% include 'LilyChatBundle:Connection:lost.html.twig' %}
  </script>
  <script type="text/template" id="modalAppTpl">
    {% include 'LilyBackOfficeBundle:Utils/Modal:app.html.twig' %}
  </script>
  <script type="text/template" id="modalConfirmTpl">
    {% include 'LilyBackOfficeBundle:Utils/Modal:confirm.html.twig' %}
  </script>
  <script type="text/template" id="modalTransferOperatorTpl">
    {% include 'LilyBackOfficeBundle:Utils/Chat/Modals/Transfer:operator.html.twig' %}
  </script>

  <script>

    /*
     * GOOGLE ANALYTICS
     */
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    {% if app.environment == 'dev' %}
    ga('create', 'UA-58970452-1', 'auto');
    {% else %}
    ga('create', 'UA-58965885-1', 'auto');
    {% endif %}
    window.config.chat = {{ app.user.client.config.chat }};
    window.config.isChatOperator = {{ is_granted('ROLE_CHAT_OPERATOR') }};
    window.config.userId = '{{ app.user.id }}';
  </script>

</body>
</html>
